(function(e){function t(t){for(var a,r,l=t[0],o=t[1],u=t[2],d=0,h=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(h.length)h.shift()();return n.push.apply(n,u||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,l=1;l<i.length;l++){var o=i[l];0!==s[o]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={app:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=o;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t),i.d(t,"eventBus",(function(){return L}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var a,s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container pt-3"},[i("div",{staticClass:"d-flex"},[i("game-board",{staticClass:"col-lg-7 p-5"}),i("leader-board",{staticClass:"col-lg-5 leaderBoardBlock border p-3 pt-4"})],1)])},r=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-form",{staticClass:"d-flex",on:{submit:e.startGame}},[i("b-form-select",{staticClass:"mr-3 gameBoardInput",attrs:{disabled:e.isGameStarted,options:e.gameModes,size:"sm",required:""},model:{value:e.activeMode,callback:function(t){e.activeMode=t},expression:"activeMode"}}),i("b-form-input",{staticClass:"mr-3 gameBoardInput",attrs:{disabled:e.isGameStarted,size:"sm",placeholder:"Enter your name",required:""},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),i("b-button",{staticClass:"gameBoardBtn",attrs:{disabled:e.isGameStarted,squared:"",variant:"outline-info",size:"sm",type:"submit"}},[e._v(e._s(e.isGameFinished?"PLAY AGAIN":"PLAY"))])],1),e.isGameFinished?i("p",{staticClass:"text-center mt-2"},[e._v(e._s(e.loosedPoints>=e.pointsWon?"Computer":e.userName)+" is winner!!!")]):e.isGameStarted?i("p",{staticClass:"text-center mt-2"},[e._v("SCORE: "+e._s(e.userName)+" - "+e._s(e.pointsWon)+" Computer - "+e._s(e.loosedPoints))]):e.isGameStarted?e._e():i("p",{staticClass:"text-center mt-2"},[e._v("LET`S PLAY :)")]),i("div",{key:e.key,ref:"gameBoard",staticClass:"game-board",style:{gridTemplateColumns:e.cellStyle,gridTemplateRows:e.cellStyle}},[e._l(e.gridArr,(function(t){return i("div",{key:t.x+t.y,ref:t.x+t.y,refInFor:!0,staticClass:"box",on:{click:function(i){return e.onCellClick(t.x+t.y)}}})})),e.primeryMsgShow?i("p",{staticClass:"mt-4"},[e._v("Firstly select game mode and enter your name, please!")]):e._e()],2)],1)},o=[],u=(i("4de4"),i("4160"),i("d81d"),i("4fad"),i("ac1f"),i("38cf"),i("5319"),i("159b"),i("2909")),c=i("bc3a"),d=i.n(c),h=function(){return d.a.get("https://starnavi-frontend-test-task.herokuapp.com/game-settings")},f=function(){return d.a.get("https://starnavi-frontend-test-task.herokuapp.com/winners")},p=function(e){return d.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",e)},m=new s["default"],v=i("ec26"),b={data:function(){return{gridArr:[],numberXArray:[],numberYArray:[],availableCells:[],colorByStatus:{neutral:"none",active:"blue",loosed:"red",win:"green"},userName:"",gameModes:[],activeCell:"",options:[],activeMode:null,timer:0,pointsWon:0,loosedPoints:0,isGameStarted:!1,isGameFinished:!1,key:Object(v["a"])(),cellStyle:"",primeryMsgShow:!0}},methods:{onCellClick:function(e){e===this.activeCell.x+this.activeCell.y&&(this.setWinStatus(),this.showChip())},fillGap:function(e){if(this.$refs[this.activeCell.x+this.activeCell.y][0].style.backgroundColor=e,this.startTimer(),0===this.availableCells.length)setTimeout(this.finishGame(),this.activeMode.delay)},setWinStatus:function(){this.fillGap("green"),this.pointsWon+=1},setLoosedStatus:function(){this.fillGap("red"),this.loosedPoints+=1},setNeutralStatus:function(){this.fillGap("blue")},startTimer:function(){var e=this;this.timer=0,a&&clearInterval(a),a=setInterval((function(){e.timer+=1}),this.activeMode.delay)},showChip:function(){var e=this;this.isGameFinished||(this.availableCells.length>0&&(this.activeCell=this.availableCells[Math.floor(Math.random()*this.availableCells.length)]),this.setNeutralStatus(this.activeCell),this.availableCells=this.availableCells.filter((function(t){return t!==e.activeCell})))},createGrid:function(){var e=this;this.numberXArray=[],this.numberYArray=[],this.gridArr=[],this.availableCells=[];for(var t=0;t<=this.activeMode.fieldCount-1;t++)this.numberXArray.push(t),this.numberYArray.push(t);this.numberXArray.forEach((function(t){e.numberYArray.forEach((function(i){e.gridArr.push({x:"x"+t,y:"y"+i})}))}));var i=450/this.activeMode.fieldCount;this.cellStyle="".concat(i,"px ").repeat(this.activeMode.fieldCount),this.availableCells=Object(u["a"])(this.gridArr),this.key=Object(v["a"])(),this.primeryMsgShow=!1},startGame:function(e){e.preventDefault(),this.isGameFinished&&this.createGrid(),this.availableCells.length||(this.availableCells=this.gridArr),this.pointsWon=0,this.loosedPoints=0,this.isGameStarted=!0,this.isGameFinished=!1,this.$nextTick((function(){this.showChip()}))},finishGame:function(){var e=this;clearInterval(a),this.timer=0,this.isGameFinished=!0,this.activeCell=null,this.isGameStarted=!1,p({winner:this.loosedPoints>=this.pointsWon?"Computer":this.userName,date:(new Date).toLocaleString()}).then((function(t){return e.updateLeaders(t)}))},updateLeaders:function(e){m.$emit("updateWinnersData",e)}},watch:{timer:function(){this.timer>=this.activeMode.delay/1e3&&this.activeCell&&(this.setLoosedStatus(),this.showChip())},pointsWon:function(){this.pointsWon>=this.gridArr.length/2&&this.finishGame()},loosedPoints:function(){this.loosedPoints>=this.gridArr.length/2&&this.finishGame()},activeMode:function(){this.createGrid()}},created:function(){var e=this;h().then((function(t){e.gameModes=Object.entries(t.data).map((function(e){return{value:{name:e[0],delay:e[1].delay,fieldCount:e[1].field},text:e[0].replace("Mode","")}}))}))}},y=b,C=(i("6e33"),i("2877")),g=Object(C["a"])(y,l,o,!1,null,null,null),_=g.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{},[i("p",{staticClass:"h5 text-center mb-3"},[e._v("LEADER BOARD")]),i("b-list-group",{key:e.key},e._l(e.leaderList,(function(t){return i("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between"},[i("p",{staticClass:"mb-0"},[e._v(e._s(t.winner))]),i("p",{staticClass:"mb-0"},[e._v(e._s(t.date))])])})),1)],1)},x=[],G={data:function(){return{leaderList:[],key:Object(v["a"])()}},methods:{updateWinnersData:function(e){this.leaderList=e.data.reverse(),this.$nextTick((function(){this.key=Object(v["a"])()}))}},created:function(){var e=this;f().then((function(t){e.updateWinnersData(t)})),m.$on("updateWinnersData",(function(t){return e.updateWinnersData(t)})),this.updateWinnersData()}},S=G,k=Object(C["a"])(S,w,x,!1,null,null,null),M=k.exports,A={components:{GameBoard:_,LeaderBoard:M}},O=A,j=(i("5f17"),Object(C["a"])(O,n,r,!1,null,"762becfc",null)),P=j.exports,W=i("5f5b");i("f9e3"),i("2dd8");s["default"].use(W["a"]);var L=new s["default"];new s["default"]({el:"#app",render:function(e){return e(P)}})},"5f17":function(e,t,i){"use strict";var a=i("bfe8"),s=i.n(a);s.a},"6e33":function(e,t,i){"use strict";var a=i("993c"),s=i.n(a);s.a},"993c":function(e,t,i){},bfe8:function(e,t,i){}});
//# sourceMappingURL=app.af56efcb.js.map